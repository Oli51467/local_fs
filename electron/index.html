<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Electron Notes App</title>
  <link rel="stylesheet" href="./node_modules/github-markdown-css/github-markdown.css">
  <!-- highlight.js 库 -->
  <script src="./node_modules/highlight.js/lib/common.js"></script>
  <style>
    :root {
      --bg-color: #fafafa;
      --text-color: #333333;
      --text-muted: #6c6c6c;
      --sidebar-bg: #d1d5db;
      --sidebar-text: #4a5568;
      --tree-bg: #f8f8f8;
      --tree-border: #e1e4e8;
      --tree-hover: #f0f0f0;
      --accent-color: #0366d6;
      --accent-hover: #0256cc;
      --border-light: #d1d9e0;
      --shadow-light: rgba(27, 31, 35, 0.04);
    }
    
    .dark-mode {
      --bg-color: #1e1e1e;
      --text-color: #cccccc;
      --text-muted: #969696;
      --sidebar-bg: #181818;
      --sidebar-text: #cccccc;
      --tree-bg: #252526;
      --tree-border: #3c3c3c;
      --tree-hover: #2a2d2e;
      --accent-color: #0e639c;
      --accent-hover: #1177bb;
      --border-light: #3c3c3c;
      --shadow-light: rgba(0, 0, 0, 0.3);
    }
    
    @font-face {
      font-family: 'SimSun';
      src: local('SimSun');
    }
    
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: 'Times New Roman', SimSun, serif;
      font-size: 14px;
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    #app {
      display: flex;
      width: 100%;
      height: 100%;
    }

    /* 最左侧 sidebar */
    #sidebar {
      width: 50px;
      background: var(--sidebar-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 10px;
      color: var(--sidebar-text);
    }

    #sidebar button {
      background: none;
      border: none;
      color: var(--sidebar-text);
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 5px 0;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.2s;
    }
    
    #sidebar button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    #sidebar button svg {
      width: 20px;
      height: 20px;
    }

    /* 资源管理器相关样式已移至 src/styles/explorer.css */

    /* 文件内容展示 */
    #file-content {
      flex: 1;
      padding: 10px;
      overflow: auto;
    }
    
    /* 设置页面样式已移至 src/styles/settings.css */

  </style>
</head>
<body>
  <!-- 启动页面 -->
  <div id="splash-screen">
    <div class="splash-container">
      <div class="splash-logo">
        <div class="logo-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 7V17C3 18.1046 3.89543 19 5 19H19C20.1046 19 21 18.1046 21 17V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8 21L16 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 17L12 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1 class="splash-title">Local File System</h1>
        <p class="splash-subtitle">智能文档管理平台</p>
      </div>
      
      <div class="splash-loading">
        <div class="loading-spinner"></div>
        <p class="loading-text">正在初始化系统...</p>
      </div>
      
      <div class="splash-footer">
        <p class="version-info">Designed and powered by Oli51467</p>
      </div>
    </div>
  </div>

  <div id="app" style="display: none;">
    <!-- 左侧 sidebar -->
    <div id="sidebar">
      <button id="toggle-tree"><div id="file-icon"></div></button>
      <button id="search-btn"><div id="search-icon"></div></button>
      <button id="settings-btn"><div id="settings-icon"></div></button>
      <button id="test-btn"><div id="test-icon"></div></button>
      <button id="database-btn"><div id="database-icon"></div></button>
    </div>

    <!-- 文件树栏 -->
    <div id="file-tree-container">
      <div id="file-tree-resizer"></div>
      <div id="file-tree-header">
        <span id="resource-title">资源管理器</span>
        <div>
          <button id="new-folder"><div id="folder-icon"></div></button>
              <button id="new-file"><div id="new-file-icon"></div></button>
              <button id="import-files"><div id="import-icon"></div></button>
              <button id="refresh-tree"><div id="refresh-icon"></div></button>
          <button id="delete-item"><div id="trash-icon"></div></button>
        </div>
      </div>
      <div id="file-tree">Loading...</div>
      
      <!-- 搜索区域 -->
      <div id="search-area" style="display: none;">
        <div id="search-input-container">
          <input type="text" id="search-input" placeholder="搜索文件内容" />
        </div>
      </div>
    </div>

    <!-- 文件内容展示 -->
    <div id="file-content"></div>
    
    <!-- 设置页面 -->
    <div id="settings-page">
      <div class="settings-section">
        <h2>外观</h2>
        <div class="setting-item">
          <span>深色模式</span>
          <label class="toggle-switch">
            <input type="checkbox" id="dark-mode-toggle">
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>
    
    <!-- 测试页面 -->
    <div id="test-page">
      <div class="test-section">
        <h2>API 测试</h2>
        
        <div class="test-form">
          <div class="form-group">
            <label>接口地址:</label>
            <input type="text" id="api-endpoint" placeholder="请输入接口地址，如: /health" value="/health">
          </div>
          
          <div class="form-group">
            <label>请求方法:</label>
            <select id="request-method">
              <option value="GET">GET</option>
              <option value="POST">POST</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Headers:</label>
            <textarea id="request-headers" placeholder='{
  "Content-Type": "application/json"
}'></textarea>
          </div>
          
          <div class="form-group">
            <label>Body (仅POST):</label>
            <textarea id="request-body" placeholder='{
  "key": "value"
}'></textarea>
          </div>
          
          <div class="form-group">
            <label>Query 参数:</label>
            <textarea id="query-params" placeholder='{
  "param1": "value1",
  "param2": "value2"
}'></textarea>
          </div>
          
          <button id="send-request" class="send-btn">发送请求</button>
        </div>
        
        <div class="response-section">
          <h3>响应结果</h3>
          <div id="response-status" class="response-status"></div>
          <pre id="response-content" class="response-content"></pre>
        </div>
      </div>
    </div>
    
    <!-- 数据库页面 -->
    <div id="database-page">
      <div class="database-section">
        <h2>数据库管理</h2>
        
        <!-- 数据库类型选择tab -->
        <div class="db-tabs">
          <button class="db-tab-btn active" data-tab="sqlite">SQLite 数据库</button>
          <button class="db-tab-btn" data-tab="faiss">Faiss 向量数据库</button>
        </div>
        
        <!-- SQLite 数据库面板 -->
        <div id="sqlite-panel" class="db-panel active">
          <div class="database-controls">
            <button id="test-db-connection" class="db-btn">测试连接</button>
            <button id="get-all-tables" class="db-btn">获取所有表</button>
            <div class="table-query-group">
              <select id="table-select">
                <option value="">选择表...</option>
              </select>
              <button id="query-table" class="db-btn">查询表数据</button>
            </div>
          </div>
          
          <div class="database-status">
            <div id="db-status" class="status-indicator"></div>
          </div>
          
          <div class="database-results">
            <div id="db-tables-list" class="tables-section">
              <h3>数据库表列表</h3>
              <div id="tables-content"></div>
            </div>
            
            <div id="db-table-data" class="table-data-section">
              <h3>表数据
                <button id="delete-all-data" class="db-btn delete-btn" style="display: none; margin-left: 10px; background-color: #dc3545;">删除所有数据</button>
                <button id="cleanup-sqlite-data" class="db-btn delete-btn" style="display: inline-block; margin-left: 10px; background-color: #dc3545;">清空SQLite数据</button>
              </h3>
              <div id="table-data-content"></div>
            </div>
          </div>
        </div>
        
        <!-- Faiss 向量数据库面板 -->
        <div id="faiss-panel" class="db-panel">
          <div class="database-controls">
            <button id="test-faiss-connection" class="db-btn">测试连接</button>
            <button id="get-faiss-statistics" class="db-btn">获取统计信息</button>
            <div class="vector-query-group">
              <select id="vector-type-select">
                <option value="">选择向量类型...</option>
              </select>
              <button id="query-vectors" class="db-btn">查询向量数据</button>
            </div>
          </div>
          
          <div class="database-status">
            <div id="faiss-status" class="status-indicator"></div>
          </div>
          
          <div class="database-results">
            <div id="faiss-statistics" class="statistics-section">
              <h3>Faiss 统计信息</h3>
              <div id="statistics-content"></div>
            </div>
            
            <div id="faiss-vectors-data" class="vectors-data-section">
              <h3>向量数据
                <button id="cleanup-faiss-vectors" class="db-btn delete-btn" style="display: inline-block; margin-left: 10px; background-color: #dc3545;">清空Faiss向量</button>
              </h3>
              <div id="vectors-data-content"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 模块化样式文件 -->
  <link rel="stylesheet" href="./src/styles/splash.css">
  <link rel="stylesheet" href="./src/styles/settings.css">
  <link rel="stylesheet" href="./src/styles/explorer.css">
  <link rel="stylesheet" href="./src/styles/test.css">
  <link rel="stylesheet" href="./src/styles/database.css">
  
  <script src="./src/modules/splash.js"></script>
  <script src="./src/modules/tab-manager.js"></script>
  <script src="./src/components/textViewer.js"></script>
  <script src="./src/components/wordViewer.js"></script>
  <script src="./src/components/markdownViewer.js"></script>
  <script src="./src/components/htmlViewer.js"></script>
  <script src="./src/components/pdfViewer.js"></script>
  <script src="./src/components/pptViewer.js"></script>
  <script src="./src/components/fileViewer.js"></script>
  <script src="./src/modules/settings.js"></script>
  <script src="./src/modules/explorer.js"></script>
  <script src="./src/modules/test.js"></script>
  <script src="./src/modules/database.js"></script>
  <script src="./icons.js"></script>
  <script src="./static/libs/jszip.min.js"></script>
  <script src="./node_modules/xml2js/lib/xml2js.js"></script>
  <script src="./static/libs/docx-preview.js"></script>
<script src="./node_modules/marked/lib/marked.umd.js"></script>
<script src="./node_modules/highlight.js/lib/index.js"></script>
<script src="./static/libs/pptx-preview.umd.js"></script>
  <script src="./renderer.js"></script>
</body>
</html>
